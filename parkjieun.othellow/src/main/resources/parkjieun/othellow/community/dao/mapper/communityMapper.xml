<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="parkjieun.othelow.community.dao.mapper.communityMapper">
	<select id="getPosts" resultType="community">
		select sort, seq, title, user_rank userRank, user_nickname userNickname, reg_date regDate, hit_count hitCount
		from users, community
		where users.user_id=community.user_id
		order by seq desc
	</select>
	
	<select id="getViewPost" resultType="community">
		select sort, title, reg_date regDate, hit_count hitCount, like_count likeCount, user_rank userRank, user_nickname userNickname, contents
		from users, community, character
		where users.user_id = community.user_id
		and users.character_no = character.character_no and seq = #{seq}
	</select>
	
	<select id="getMyPost" resultType="community">
		select sort, title, reg_date regDate, hit_count hitCount, like_count likeCount, contents, users.user_id userID
		from users, community
		where users.user_id = community.user_id and seq = #{seq}
	</select>
	
	<insert id="addPost" parameterType="string">
		insert into community(seq, title, contents, image) values (seq.nextval, #{title}, #{content}, #{image})
	</insert>
	
	<update id="updatePost" parameterType="community">
		update community
		set title=#{title}, contents=#{contents}, image=#{image}
		where seq=#{seq}
	</update>
	
	<delete id="delPost" parameterType="int">
		delete community where seq=#{seq}
	</delete>
	
	
</mapper>